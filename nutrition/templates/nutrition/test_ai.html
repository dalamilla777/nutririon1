
{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio Paciente</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="gradient-bg">
        <div class="gradients-container">
            <div class="g1"></div>
            <div class="g2"></div>
            <div class="g3"></div>
            <div class="g4"></div>
            <div class="g5"></div>
            <div class="interactive"></div>
        </div>
    </div>
    <div class="navbar">
        <a href="{% url 'patient_home' %}" class="icon-home">
            <i class="fas fa-home"></i> Inicio
        </a>
        </a>
        <a href="{% url 'home' %}" class="icon-logout">
            <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
        </a>
    </div>
    <h1>Prueba de IA</h1>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <label for="image">Subir Imagen:</label>
        <input type="file" name="image" id="image" required>
        <button type="submit">Analizar</button>
    </form>

    <!-- Mostrar el resultado del análisis en formato JSON bonito -->
    {% if formatted_json %}
    <h2>Resultado del Análisis:</h2>
    <pre>{{ formatted_json }}</pre>
    {% endif %}

    <!-- Tabla para mostrar los análisis previos -->
    <h2>Tus Análisis Anteriores</h2>
    <table>
        <thead>
            <tr>
                <th>Fecha</th>
                <th>Calorías</th>
                <th>Ingredientes</th>
                <th>¿Es Sano?</th>
            </tr>
        </thead>
        <tbody>
            {% for analysis in analyses %}
            <tr>
                <td>{{ analysis.fecha_analisis }}</td>
                <td>{{ analysis.calorias }}</td>
                <td>{{ analysis.ingredientes }}</td>
                <td>{{ analysis.es_sano|yesno:"Sí,No" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>

